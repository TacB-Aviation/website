define("discourse/plugins/discourse-assign/discourse/assigned-group-route-map",["exports"],(function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={resource:"group",map(){this.route("assigned",(function(){this.route("show",{path:"/:filter"})}))}}})),define("discourse/plugins/discourse-assign/discourse/assigned-messages-route-map",["exports"],(function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={resource:"user.userPrivateMessages",map(){this.route("assigned",(function(){this.route("index",{path:"/"})}))}}})),define("discourse/plugins/discourse-assign/discourse/assigns-activity-route-map",["exports"],(function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={resource:"user.userActivity",map(){this.route("assigned")}}})),define("discourse/plugins/discourse-assign/discourse/components/assign-actions-dropdown",["exports","@ember/object","@ember-decorators/component","discourse-i18n","select-kit/components/dropdown-select-box","select-kit/components/select-kit"],(function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const r=dt7948.c(class extends n.default{headerIcon=null
allowInitialValueMutation=!1
showFullTitle=!0
computeContent(){let s=[]
return this.assignee&&(s=s.concat([{id:"unassign",icon:this.group?"group-times":"user-xmark",name:(0,i.i18n)("discourse_assign.unassign.title"),description:(0,i.i18n)("discourse_assign.unassign.help",{username:this.assignee})},{id:"reassign",icon:"users",name:(0,i.i18n)("discourse_assign.reassign.title"),description:(0,i.i18n)("discourse_assign.reassign.help")}])),this.topic.indirectly_assigned_to&&Object.entries(this.topic.indirectly_assigned_to).forEach((e=>{const[t,n]=e,o=n.assigned_to
s=s.concat({id:`unassign_post_${t}`,icon:o.username?"user-xmark":"group-times",name:(0,i.i18n)("discourse_assign.unassign_post.title"),description:(0,i.i18n)("discourse_assign.unassign_post.help",{username:o.username||o.name})})})),s}onChange(s){switch(s){case"unassign":this.unassign(this.topic.id)
break
case"reassign":this.reassign(this.topic,this.assignee)}const e=s.match(/unassign_post_(\d+)/)?.[1]
e&&this.unassign(e,"Post")}static#s=(()=>dt7948.n(this.prototype,"onChange",[e.action]))()},[(0,t.classNames)("assign-actions-dropdown"),(0,o.selectKitOptions)({icon:null,translatedNone:"...",showFullTitle:!0})])
s.default=r})),define("discourse/plugins/discourse-assign/discourse/components/assign-button",["exports","@glimmer/component","@ember/object","@ember/service","discourse/components/d-button","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static shouldRender(s){return!s.post.firstPost}static hidden(s){return s.post.assigned_to_user?.id!==s.state.currentUser.id}static#s=(()=>dt7948.g(this.prototype,"taskActions",[i.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
get icon(){return this.isAssigned?"user-xmark":"user-plus"}get isAssigned(){return this.args.post.assigned_to_user||this.args.post.assigned_to_group}get title(){return this.isAssigned?"discourse_assign.unassign_post.title":"discourse_assign.assign_post.title"}async acceptAnswer(){if(this.isAssigned){const s=this.args.post
await this.taskActions.unassign(s.id,"Post"),delete s.topic.indirectly_assigned_to[s.id]}else this.taskActions.showAssignModal(this.args.post,{isAssigned:!1,targetType:"Post"})}static#t=(()=>dt7948.n(this.prototype,"acceptAnswer",[t.action]))()
static#i=(()=>(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"seoWQ4b+",block:'[[[1,"\\n    "],[8,[32,0],[[16,0,[52,[30,0,["isAssigned"]],"post-action-menu__unassign-post unassign-post","post-action-menu__assign-post assign-post"]],[17,1]],[["@action","@icon","@title"],[[30,0,["acceptAnswer"]],[30,0,["icon"]],[30,0,["title"]]]],null],[1,"\\n  "]],["&attrs"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assign-button.js",scope:()=>[n.default],isStrictMode:!0}),this))()}s.default=a})),define("discourse/plugins/discourse-assign/discourse/components/assign-user-form",["exports","@glimmer/component","@glimmer/tracking","@ember/object","discourse/plugins/discourse-assign/discourse/components/assignment","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static#s=(()=>dt7948.g(this.prototype,"showValidationErrors",[t.tracked],(function(){return!1})))()
#n=(()=>{dt7948.i(this,"showValidationErrors")})()
constructor(){super(...arguments),this.args.formApi.submit=this.assign}get assigneeIsEmpty(){return!this.args.model.username&&!this.args.model.group_name}async assign(){this.assigneeIsEmpty?this.showValidationErrors=!0:await this.args.onSubmit()}static#t=(()=>dt7948.n(this.prototype,"assign",[i.action]))()
static#i=(()=>(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"DEZrvZWn",block:'[[[1,"\\n    "],[8,[32,0],null,[["@assignment","@onSubmit","@showValidationErrors"],[[30,1],[30,0,["assign"]],[30,0,["showValidationErrors"]]]],null],[1,"\\n  "]],["@model"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assign-user-form.js",scope:()=>[n.default],isStrictMode:!0}),this))()}s.default=a})),define("discourse/plugins/discourse-assign/discourse/components/assigned-to-first-post",["exports","@glimmer/component","@ember/service","@ember/template","discourse/helpers/d-icon","discourse/lib/decorators","discourse-i18n","discourse/plugins/discourse-assign/discourse/lib/url","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r,a,u,d){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class l extends e.default{static#s=(()=>dt7948.g(this.prototype,"siteSettings",[t.service]))()
#o=(()=>{dt7948.i(this,"siteSettings")})()
get assignedToUser(){return this.args.post?.topic?.assigned_to_user}get assignedToGroup(){return this.args.post?.topic?.assigned_to_group}get icon(){return this.assignedToUser?"user-plus":"group-plus"}get indirectlyAssignedTo(){return this.args.post?.topic?.indirectly_assigned_to}get indirectAssignments(){return this.indirectlyAssignedTo?Object.keys(this.indirectlyAssignedTo).map((s=>{const e=this.indirectlyAssignedTo[s].post_number
return{postId:s,assignee:this.indirectlyAssignedTo[s].assigned_to,postNumber:e,url:`${this.args.post.topic.url}/${e}`}})):null}get isAssigned(){return!!(this.assignedToUser||this.assignedToGroup||this.args.post?.topic?.indirectly_assigned_to)}get hasOnlyIndirectAssignments(){return!this.assignedToUser&&!this.assignedToGroup}prioritizedAssigneeName(s){return(this.siteSettings.prioritize_full_name_in_ux||!s.username)&&s.name||s.username}static#t=(()=>dt7948.n(this.prototype,"prioritizedAssigneeName",[o.bind]))()
static#i=(()=>(0,u.setComponentTemplate)((0,d.createTemplateFactory)({id:"arPvsMe+",block:'[[[1,"\\n"],[41,[30,0,["isAssigned"]],[[[1,"      "],[10,2],[14,0,"assigned-to"],[12],[1,"\\n        "],[1,[28,[32,0],[[30,0,["icon"]]],null]],[1,"\\n"],[41,[30,0,["assignedToUser"]],[[[1,"          "],[10,1],[14,0,"assignee"],[12],[1,"\\n            "],[10,1],[14,0,"assigned-to--user"],[12],[1,"\\n              "],[1,[28,[32,1],[[28,[32,2],["discourse_assign.assigned_topic_to"],[["username","path"],[[28,[30,0,["prioritizedAssigneeName"]],[[30,0,["assignedToUser"]]],null],[28,[32,3],[[30,0,["assignedToUser"]]],null]]]]],null]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["assignedToGroup"]],[[[1,"          "],[10,1],[14,0,"assignee"],[12],[1,"\\n            "],[10,1],[14,0,"assigned-to--group"],[12],[1,"\\n              "],[1,[28,[32,1],[[28,[32,2],["discourse_assign.assigned_topic_to"],[["username","path"],[[30,0,["assignedToGroup","name"]],[28,[32,4],[[30,0,["assignedToGroup"]]],null]]]]],null]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["hasOnlyIndirectAssignments"]],[[[1,"          "],[10,1],[14,0,"assign-text"],[12],[1,"\\n            "],[1,[28,[32,2],["discourse_assign.assigned"],null]],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[41,[30,0,["indirectlyAssignedTo"]],[[[42,[28,[31,2],[[28,[31,2],[[30,0,["indirectAssignments"]]],null]],null],"postId",[[[1,"            "],[10,1],[14,0,"assignee"],[12],[1,"\\n              "],[10,3],[15,6,[30,1,["url"]]],[14,0,"assigned-indirectly"],[12],[1,"\\n                "],[1,[28,[32,2],["discourse_assign.assign_post_to_multiple"],[["post_number","username"],[[30,1,["postNumber"]],[28,[30,0,["prioritizedAssigneeName"]],[[30,1,["assignee"]]],null]]]]],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[1]],null]],[]],null],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"  "]],["indirectAssignment"],false,["if","each","-track-array"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-to-first-post.js",scope:()=>[n.default,i.htmlSafe,r.i18n,a.assignedToUserPath,a.assignedToGroupPath],isStrictMode:!0}),this))()}s.default=l})),define("discourse/plugins/discourse-assign/discourse/components/assigned-to-post",["exports","@glimmer/component","@ember/object","@ember/service","discourse/components/d-button","discourse/components/dropdown-menu","discourse/helpers/d-icon","discourse-i18n","float-kit/components/d-menu","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r,a,u,d,l){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class c extends e.default{static#s=(()=>dt7948.g(this.prototype,"taskActions",[i.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
static#t=(()=>dt7948.g(this.prototype,"siteSettings",[i.service]))()
#o=(()=>{dt7948.i(this,"siteSettings")})()
get nameOrUsername(){return this.siteSettings.prioritize_full_name_in_ux&&this.args.assignedToUser.name||this.args.assignedToUser.username}unassign(){this.taskActions.unassignPost(this.args.post)}static#i=(()=>dt7948.n(this.prototype,"unassign",[t.action]))()
editAssignment(){this.taskActions.showAssignPostModal(this.args.post)}static#r=(()=>dt7948.n(this.prototype,"editAssignment",[t.action]))()
static#a=(()=>(0,d.setComponentTemplate)((0,l.createTemplateFactory)({id:"35Vrb8pQ",block:'[[[1,"\\n"],[41,[30,1],[[[1,"      "],[1,[28,[32,0],["user-plus"],null]],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[32,0],["group-plus"],null]],[1,"\\n"]],[]]],[1,"\\n    "],[10,1],[14,0,"assign-text"],[12],[1,"\\n      "],[1,[28,[32,1],["discourse_assign.assigned_to"],null]],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,3],[15,6,[30,2]],[14,0,"assigned-to-username"],[12],[1,"\\n"],[41,[30,1],[[[1,"        "],[1,[30,0,["nameOrUsername"]]],[1,"\\n"]],[]],[[[1,"        "],[1,[30,3,["name"]]],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n\\n    "],[8,[32,2],[[24,0,"btn-flat more-button"]],[["@identifier","@icon","@autofocus"],["post-assign-menu","ellipsis",true]],[["default"],[[[[1,"\\n      "],[8,[32,3],null,null,[["default"],[[[[1,"\\n        "],[8,[30,4,["item"]],null,null,[["default"],[[[[1,"\\n          "],[8,[32,4],[[24,0,"btn-transparent unassign-btn"]],[["@action","@icon","@label"],[[30,0,["unassign"]],"user-plus","discourse_assign.unassign.title"]],null],[1,"\\n        "]],[]]]]],[1,"\\n        "],[8,[30,4,["item"]],null,null,[["default"],[[[[1,"\\n          "],[8,[32,4],[[24,0,"btn-transparent edit-assignment-btn"]],[["@action","@icon","@label"],[[30,0,["editAssignment"]],"group-plus","discourse_assign.reassign.title_w_ellipsis"]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[4]]]]],[1,"\\n    "]],[]]]]],[1,"\\n  "]],["@assignedToUser","@href","@assignedToGroup","dropdown"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-to-post.js",scope:()=>[r.default,a.i18n,u.default,o.default,n.default],isStrictMode:!0}),this))()}s.default=c})),define("discourse/plugins/discourse-assign/discourse/components/assigned-to",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const n=(0,i.createTemplateFactory)({id:"1Eg8/PnA",block:'[[[10,0],[14,0,"assigned-to-user"],[12],[1,"\\n  "],[1,[28,[35,1],[[30,1]],[["imageSize"],["small"]]]],[1,"\\n\\n  "],[10,1],[14,0,"assigned-username"],[12],[1,"\\n    "],[1,[30,1,["username"]]],[1,"\\n  "],[13],[1,"\\n\\n  "],[18,2,null],[1,"\\n"],[13]],["@user","&default"],false,["div","avatar","span","yield"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/assigned-to.hbs",isStrictMode:!1})
s.default=(0,e.setComponentTemplate)(n,(0,t.default)(void 0,"assigned-to"))})),define("discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-column",["exports","@glimmer/component","@ember/object","@ember/service","discourse/plugins/discourse-assign/discourse/components/assign-actions-dropdown","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static#s=(()=>dt7948.g(this.prototype,"taskActions",[i.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
static#t=(()=>dt7948.g(this.prototype,"router",[i.service]))()
#u=(()=>{dt7948.i(this,"router")})()
async unassign(s){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic"
await this.taskActions.unassign(s,e),this.router.refresh()}static#i=(()=>dt7948.n(this.prototype,"unassign",[t.action]))()
reassign(s){this.taskActions.showAssignModal(s,{onSuccess:()=>this.router.refresh()})}static#r=(()=>dt7948.n(this.prototype,"reassign",[t.action]))()
static#a=(()=>(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"CgiPEHvE",block:'[[[1,"\\n"],[41,[30,1,["assigned_to_user"]],[[[1,"      "],[8,[32,0],null,[["@topic","@assignee","@unassign","@reassign"],[[30,1],[30,1,["assigned_to_user","username"]],[30,0,["unassign"]],[30,0,["reassign"]]]],null],[1,"\\n"]],[]],[[[41,[30,1,["assigned_to_group"]],[[[1,"      "],[8,[32,0],null,[["@topic","@assignee","@group","@unassign","@reassign"],[[30,1],[30,1,["assigned_to_group","name"]],true,[30,0,["unassign"]],[30,0,["reassign"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[8,[32,0],null,[["@topic","@unassign"],[[30,1],[30,0,["unassign"]]]],null],[1,"\\n    "]],[]]]],[]]],[1,"  "]],["@topic"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-column.js",scope:()=>[n.default],isStrictMode:!0}),this))()}s.default=a})),define("discourse/plugins/discourse-assign/discourse/components/assignee-chooser-row",["exports","@ember/component","select-kit/components/email-group-user-chooser-row","@ember/template-factory"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const n=(0,i.createTemplateFactory)({id:"XEKThMFm",block:'[[[41,[30,0,["item","isUser"]],[[[1,"  "],[1,[28,[35,1],[[30,0,["item"]]],[["imageSize"],["tiny"]]]],[1,"\\n  "],[10,0],[14,0,"user-wrapper"],[12],[1,"\\n    "],[10,1],[14,0,"identifier"],[12],[1,[28,[35,4],[[30,0,["item","id"]]],null]],[13],[1,"\\n    "],[10,1],[14,0,"name"],[12],[1,[30,0,["item","name"]]],[13],[1,"\\n"],[41,[28,[37,5],[[30,0,["item","showUserStatus"]],[30,0,["item","status"]]],null],[[[1,"      "],[8,[39,6],null,[["@status","@showDescription"],[[30,0,["item","status"]],true]],null],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n  "],[1,[28,[35,7],[[30,0,["item","id"]]],null]],[1,"\\n"]],[]],[[[41,[30,0,["item","isGroup"]],[[[1,"  "],[1,[28,[35,8],["users"],null]],[1,"\\n  "],[10,0],[14,0,"user-wrapper"],[12],[1,"\\n    "],[10,1],[14,0,"identifier"],[12],[1,[30,0,["item","id"]]],[13],[1,"\\n    "],[10,1],[14,0,"name"],[12],[1,[30,0,["item","full_name"]]],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[28,[35,8],["envelope"],null]],[1,"\\n  "],[10,1],[14,0,"identifier"],[12],[1,[30,0,["item","id"]]],[13],[1,"\\n"]],[]]]],[]]]],[],false,["if","avatar","div","span","format-username","and","user-status-message","decorate-username-selector","d-icon"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/assignee-chooser-row.hbs",isStrictMode:!1})
class o extends t.default{}s.default=o,(0,e.setComponentTemplate)(n,o)})),define("discourse/plugins/discourse-assign/discourse/components/assignee-chooser",["exports","select-kit/components/email-group-user-chooser"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class t extends e.default{modifyComponentForRow(){return"assignee-chooser-row"}}s.default=t})),define("discourse/plugins/discourse-assign/discourse/components/assignment",["exports","@glimmer/component","@ember/helper","@ember/legacy-built-in-components","@ember/modifier","@ember/object","@ember/service","discourse/helpers/d-icon","discourse-i18n","select-kit/components/combo-box","truth-helpers/helpers/not","discourse/plugins/discourse-assign/discourse/components/assignee-chooser","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r,a,u,d,l,c,g,p){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class m extends e.default{static#s=(()=>dt7948.g(this.prototype,"siteSettings",[r.service]))()
#o=(()=>{dt7948.i(this,"siteSettings")})()
static#t=(()=>dt7948.g(this.prototype,"taskActions",[r.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
get assignee(){return this.args.assignment.username||this.args.assignment.group_name}get status(){return this.args.assignment.status||this.assignStatuses[0]}get assignStatuses(){return this.siteSettings.assign_statuses.split("|").filter(Boolean)}get assignStatusOptions(){return this.assignStatuses.map((s=>({id:s,name:s})))}get assigneeIsEmpty(){return!this.args.assignment.username&&!this.args.assignment.group_name}get showAssigneeIeEmptyError(){return this.assigneeIsEmpty&&this.args.showValidationErrors}handleTextAreaKeydown(s){(s.ctrlKey||s.metaKey)&&"Enter"===s.key&&this.args.onSubmit()}static#i=(()=>dt7948.n(this.prototype,"handleTextAreaKeydown",[o.action]))()
markAsEdited(){this.args.assignment.isEdited=!0}static#r=(()=>dt7948.n(this.prototype,"markAsEdited",[o.action]))()
setAssignee(s){let[e]=s
this.taskActions.allowedGroupsForAssignment.includes(e)?(this.args.assignment.username=null,this.args.assignment.group_name=e):(this.args.assignment.username=e,this.args.assignment.group_name=null),this.markAsEdited()}static#a=(()=>dt7948.n(this.prototype,"setAssignee",[o.action]))()
setStatus(s){this.args.assignment.status=s,this.markAsEdited()}static#d=(()=>dt7948.n(this.prototype,"setStatus",[o.action]))()
static#l=(()=>(0,g.setComponentTemplate)((0,p.createTemplateFactory)({id:"QX4ROyyD",block:'[[[1,"\\n    "],[10,0],[15,0,[29,["control-group\\n        ",[52,[30,0,["showAssigneeIeEmptyError"]],"assignee-error"]]]],[12],[1,"\\n      "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.assignee_label"],null]],[13],[1,"\\n      "],[8,[32,1],[[24,"autocomplete","off"]],[["@id","@value","@onChange","@showUserStatus","@options"],["assignee-chooser",[30,0,["assignee"]],[30,0,["setAssignee"]],true,[28,[32,2],null,[["mobilePlacementStrategy","includeGroups","customSearchOptions","groupMembersOf","maximum","tabindex","expandedOnInsert","caretUpIcon","caretDownIcon"],["absolute",true,[28,[32,2],null,[["assignableGroups","defaultSearchResults"],[true,[30,0,["taskActions","suggestions"]]]]],[30,0,["taskActions","allowedGroups"]],1,1,[28,[32,3],[[30,0,["assignee"]]],null],"magnifying-glass","magnifying-glass"]]]]],null],[1,"\\n\\n"],[41,[30,0,["showAssigneeIeEmptyError"]],[[[1,"        "],[10,1],[14,0,"error-label"],[12],[1,"\\n          "],[1,[28,[32,4],["triangle-exclamation"],null]],[1,"\\n          "],[1,[28,[32,0],["discourse_assign.assign_modal.choose_assignee"],null]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n\\n"],[41,[30,0,["siteSettings","enable_assign_status"]],[[[1,"      "],[10,0],[14,0,"control-group assign-status"],[12],[1,"\\n        "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.status_label"],null]],[13],[1,"\\n        "],[8,[32,5],null,[["@id","@content","@value","@onChange"],["assign-status",[30,0,["assignStatusOptions"]],[30,0,["status"]],[30,0,["setStatus"]]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[10,0],[14,0,"control-group assign-status"],[12],[1,"\\n      "],[10,"label"],[12],[1,"\\n        "],[1,[28,[32,0],["discourse_assign.assign_modal.note_label"],null]],[1," "],[10,1],[14,0,"label-optional"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.optional_label"],null]],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[8,[32,6],[[24,1,"assign-modal-note"],[4,[32,7],["keydown",[30,0,["handleTextAreaKeydown"]]],null],[4,[32,7],["input",[30,0,["markAsEdited"]]],null]],[["@value"],[[30,1,["note"]]]],null],[1,"    "],[13],[1,"\\n  "]],["@assignment"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assignment.js",scope:()=>[u.i18n,c.default,t.hash,l.default,a.default,d.default,i.TextArea,n.on],isStrictMode:!0}),this))()}s.default=m})),define("discourse/plugins/discourse-assign/discourse/components/bulk-actions/assign-user",["exports","@ember/component","@glimmer/component","@ember/object","@ember-compat/tracked-built-ins","@ember/template-factory"],(function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const r=(0,o.createTemplateFactory)({id:"BIZ6nZhO",block:'[[[10,0],[12],[1,"\\n  "],[8,[39,1],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["assign"]],[30,0,["formApi"]]]],null],[1,"\\n"],[13],[1,"\\n\\n"],[10,0],[12],[1,"\\n  "],[8,[39,2],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["formApi","submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n"],[13]],[],false,["div","assign-user-form","d-button","if"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/bulk-actions/assign-user.hbs",isStrictMode:!1})
class a extends t.default{model=(()=>new n.TrackedObject({}))()
formApi={submit(){}}
async assign(){return this.args.performAndRefresh({type:"assign",username:this.model.username,status:this.model.status,note:this.model.note})}static#s=(()=>dt7948.n(this.prototype,"assign",[i.action]))()}s.default=a,(0,e.setComponentTemplate)(r,a)})),define("discourse/plugins/discourse-assign/discourse/components/bulk-actions/bulk-assign-user",["exports","@glimmer/component","@ember/object","@ember/render-modifiers/modifiers/did-insert","@ember-compat/tracked-built-ins","discourse/plugins/discourse-assign/discourse/components/assign-user-form","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class u extends e.default{model=(()=>new n.TrackedObject({}))()
formApi={submit(){}}
async assign(s){return s({type:"assign",username:this.model.username,status:this.model.status,note:this.model.note})}static#s=(()=>dt7948.n(this.prototype,"assign",[t.action]))()
performRegistration(){this.args.onRegisterAction?.(this.assign.bind(this))}static#t=(()=>dt7948.n(this.prototype,"performRegistration",[t.action]))()
static#i=(()=>(0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"JVQmYH9x",block:'[[[1,"\\n    "],[11,1],[4,[32,0],[[30,0,["performRegistration"]]],null],[12],[13],[1,"\\n    "],[8,[32,1],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["assign"]],[30,0,["formApi"]]]],null],[1,"\\n  "]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/bulk-actions/bulk-assign-user.js",scope:()=>[i.default,o.default],isStrictMode:!0}),this))()}s.default=u})),define("discourse/plugins/discourse-assign/discourse/components/flagged-topic-listener",["exports","@ember/component","@ember/object"],(function(s,e,t){"use strict"
function i(s,e){s&&s.id===e.topic_id&&(0,t.set)(s,"assigned_to_user",e.assigned_to)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class n extends e.default{didInsertElement(){super.didInsertElement(...arguments),this.messageBus.subscribe("/staff/topic-assignment",(s=>{this.flaggedTopics?this.flaggedTopics.forEach((e=>i(e.topic,s))):i(this.topic,s)}))}willDestroyElement(){super.willDestroyElement(...arguments),this.messageBus.unsubscribe("/staff/topic-assignment")}}s.default=n})),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-filter",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const n=(0,i.createTemplateFactory)({id:"+ZHGSsA8",block:'[[[10,"li"],[12],[1,"\\n"],[41,[30,1],[[[1,"    "],[8,[39,2],null,[["@route","@model","@query"],["group.assigned.show",[30,2,["username_lower"]],[28,[37,3],null,[["order","ascending","search"],[[30,3],[30,4],[30,5]]]]]],[["default"],[[[[1,"\\n      "],[10,0],[14,0,"assign-image"],[12],[1,"\\n        "],[10,3],[15,6,[30,2,["userPath"]]],[15,"data-user-card",[30,2,["username"]]],[12],[1,[28,[35,6],[[30,0,["filter"]]],[["imageSize"],["large"]]]],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"assign-names"],[12],[1,"\\n        "],[10,0],[14,0,"assign-username"],[12],[1,[28,[35,7],[[30,2,["username"]]],null]],[13],[1,"\\n        "],[10,0],[14,0,"assign-name"],[12],[1,[30,2,["name"]]],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"assign-count"],[12],[1,"\\n        "],[1,[30,2,["assignments_count"]]],[1,"\\n      "],[13],[1,"\\n    "]],[]]]]],[1,"\\n"]],[]],[[[41,[30,6],[[[1,"    "],[8,[39,2],null,[["@route","@model","@query"],["group.assigned.show",[30,2],[28,[37,3],null,[["order","ascending","search"],[[30,3],[30,4],[30,5]]]]]],[["default"],[[[[1,"\\n      "],[10,0],[14,0,"assign-image"],[12],[1,"\\n        "],[1,[28,[35,8],["group-plus"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"assign-names"],[12],[1,"\\n        "],[10,0],[14,0,"assign-username"],[12],[1,[30,6]],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"assign-count"],[12],[1,"\\n        "],[1,[30,7]],[1,"\\n      "],[13],[1,"\\n    "]],[]]]]],[1,"\\n"]],[]],[[[1,"    "],[8,[39,2],null,[["@route","@model","@query"],["group.assigned.show",[30,2],[28,[37,3],null,[["order","ascending","search"],[[30,3],[30,4],[30,5]]]]]],[["default"],[[[[1,"\\n      "],[10,0],[14,0,"assign-everyone"],[12],[1,"\\n        "],[1,[28,[35,9],["discourse_assign.group_everyone"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"assign-count"],[12],[1,"\\n        "],[1,[30,7]],[1,"\\n      "],[13],[1,"\\n    "]],[]]]]],[1,"\\n  "]],[]]]],[]]],[13]],["@showAvatar","@filter","@order","@ascending","@search","@groupName","@assignmentCount"],false,["li","if","link-to","hash","div","a","avatar","format-username","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/group-assigned-filter.hbs",isStrictMode:!1})
s.default=(0,e.setComponentTemplate)(n,(0,t.default)(void 0,"group-assigned-filter"))})),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const n=(0,i.createTemplateFactory)({id:"PBXUjQcZ",block:'[[[8,[39,0],null,[["@route"],["group.assigned"]],[["default"],[[[[1,"\\n  "],[1,[28,[35,1],["group-plus"],[["class"],["glyph"]]]],[1,[28,[35,2],["discourse_assign.assigned"],null]],[1,"\\n  ("],[1,[30,1,["assignment_count"]]],[1,")\\n"]],[]]]]]],["@group"],false,["link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item.hbs",isStrictMode:!1})
s.default=(0,e.setComponentTemplate)(n,(0,t.default)(void 0,"group-assigned-menu-item"))})),define("discourse/plugins/discourse-assign/discourse/components/modal/assign-user",["exports","@ember/component","@glimmer/component","@ember/object","@ember/service","@ember-compat/tracked-built-ins","discourse-i18n","@ember/template-factory"],(function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const u=(0,a.createTemplateFactory)({id:"8+afSM39",block:'[[[8,[39,0],[[24,0,"assign"]],[["@title","@closeModal"],[[30,0,["title"]],[30,1]]],[["body","footer"],[[[[1,"\\n    "],[8,[39,2],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["onSubmit"]],[30,0,["formApi"]]]],null],[1,"\\n  "]],[]],[[[1,"\\n    "],[8,[39,4],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["formApi","submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n\\n    "],[8,[39,6],null,[["@close"],[[30,1]]],null],[1,"\\n  "]],[]]]]]],["@closeModal"],false,["d-modal",":body","assign-user-form",":footer","d-button","if","d-modal-cancel"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/modal/assign-user.hbs",isStrictMode:!1})
class d extends t.default{static#s=(()=>dt7948.g(this.prototype,"taskActions",[n.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
model=(()=>new o.TrackedObject(this.args.model))()
formApi={submit(){}}
get title(){let s
switch(this.model.targetType){case"Post":s="_post_modal"
break
case"Topic":s="_modal"}return(0,r.i18n)(`discourse_assign.assign${s}.${this.model.reassign?"reassign_title":"title"}`)}async onSubmit(){this.args.closeModal(),await this.taskActions.assign(this.model)}static#t=(()=>dt7948.n(this.prototype,"onSubmit",[i.action]))()}s.default=d,(0,e.setComponentTemplate)(u,d)})),define("discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments",["exports","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","discourse/components/d-button","discourse/components/d-modal","discourse/components/d-modal-cancel","discourse/lib/ajax-error","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/topic-assignments","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r,a,u,d,l,c,g){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class p extends e.default{static#s=(()=>dt7948.g(this.prototype,"taskActions",[n.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
static#t=(()=>dt7948.g(this.prototype,"assignments",[t.tracked],(function(){return this.topic.assignments()})))()
#c=(()=>{dt7948.i(this,"assignments")})()
get title(){return this.topic.isAssigned()||this.topic.hasAssignedPosts()?(0,d.i18n)("edit_assignments_modal.title"):(0,d.i18n)("discourse_assign.assign_modal.title")}get topic(){return this.args.model.topic}async submit(){this.args.closeModal()
try{await this.#g()}catch(s){(0,u.popupAjaxError)(s)}}static#i=(()=>dt7948.n(this.prototype,"submit",[i.action]))()
async#g(){for(const s of this.assignments)s.isEdited&&await this.taskActions.putAssignment(s)}static#r=(()=>(0,c.setComponentTemplate)((0,g.createTemplateFactory)({id:"hy5lowUx",block:'[[[1,"\\n    "],[8,[32,0],[[24,0,"assign"]],[["@title","@closeModal"],[[30,0,["title"]],[30,1]]],[["body","footer"],[[[[1,"\\n        "],[8,[32,1],null,[["@assignments","@onSubmit"],[[30,0,["assignments"]],[30,0,["submit"]]]],null],[1,"\\n      "]],[]],[[[1,"\\n        "],[8,[32,2],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n\\n        "],[8,[32,3],null,[["@close"],[[30,1]]],null],[1,"\\n      "]],[]]]]],[1,"\\n  "]],["@closeModal"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments.js",scope:()=>[r.default,l.default,o.default,a.default],isStrictMode:!0}),this))()}s.default=p})),define("discourse/plugins/discourse-assign/discourse/components/post-assignments-display",["exports","@glimmer/component","discourse/plugins/discourse-assign/discourse/lib/url","discourse/plugins/discourse-assign/discourse/components/assigned-to-first-post","discourse/plugins/discourse-assign/discourse/components/assigned-to-post","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static shouldRender(s){return s.post}get post(){return this.args.outletArgs.post}get assignedTo(){return this.post.topic?.indirectly_assigned_to?.[this.post.id]?.assigned_to}get assignedToUser(){return this.assignedTo.username?this.assignedTo:null}get assignedToGroup(){return!this.assignedToUser&&this.assignedTo.name?this.assignedTo:null}get assignedHref(){return this.assignedToUser?(0,t.assignedToUserPath)(this.assignedToUser):(0,t.assignedToGroupPath)(this.assignedToGroup)}static#s=(()=>(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"/Afg82Zl",block:'[[[1,"\\n"],[41,[30,0,["post","firstPost"]],[[[1,"      "],[8,[32,0],null,[["@post"],[[30,0,["post"]]]],null],[1,"\\n"]],[]],[[[41,[30,0,["assignedTo"]],[[[1,"      "],[10,2],[14,0,"assigned-to"],[12],[1,"\\n        "],[8,[32,1],null,[["@assignedToUser","@assignedToGroup","@href","@post"],[[30,0,["assignedToUser"]],[30,0,["assignedToGroup"]],[30,0,["assignedHref"]],[30,0,["post"]]]],null],[1,"\\n      "],[13],[1,"\\n    "]],[]],null]],[]]],[1,"  "]],[],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/post-assignments-display.js",scope:()=>[i.default,n.default],isStrictMode:!0}),this))()}s.default=a})),define("discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency",["exports","@ember/component","discourse/lib/decorators","discourse-i18n","@ember/template-factory"],(function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const o=(0,n.createTemplateFactory)({id:"e9paFawI",block:'[[[41,[30,0,["siteSettings","assign_enabled"]],[[[1,"  "],[10,0],[14,0,"controls controls-dropdown"],[12],[1,"\\n    "],[10,"label"],[12],[1,[28,[35,3],["discourse_assign.reminders_frequency.description"],null]],[13],[1,"\\n    "],[8,[39,4],null,[["@id","@valueProperty","@content","@value","@onChange"],["remind-assigns-frequency","value",[30,0,["availableFrequencies"]],[30,0,["selectedFrequency"]],[28,[37,5],[[30,0],[28,[37,6],[[30,0,["user","custom_fields","remind_assigns_frequency"]]],null]],null]]],null],[1,"\\n  "],[13],[1,"\\n"]],[]],null]],[],false,["if","div","label","i18n","combo-box","action","mut"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency.hbs",isStrictMode:!1})
class r extends e.default{selectedFrequency(s,e){return this.availableFrequencies.map((s=>s.value)).includes(s)?s:e}static#s=(()=>dt7948.n(this.prototype,"selectedFrequency",[(0,t.default)("user.custom_fields.remind_assigns_frequency","siteSettings.remind_assigns_frequency")]))()
availableFrequencies(s){return s.map((s=>({name:(0,i.i18n)(s.name),value:s.value,selected:!1})))}static#t=(()=>dt7948.n(this.prototype,"availableFrequencies",[(0,t.default)("user.reminders_frequency")]))()}s.default=r,(0,e.setComponentTemplate)(o,r)})),define("discourse/plugins/discourse-assign/discourse/components/topic-assignments",["exports","@glimmer/component","@glimmer/tracking","@ember/object","discourse-i18n","select-kit/components/combo-box","discourse/plugins/discourse-assign/discourse/components/assignment","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class d extends e.default{static#s=(()=>dt7948.g(this.prototype,"selectedAssignment",[t.tracked],(function(){return this.args.assignments.find((s=>0===s.id))})))()
#p=(()=>{dt7948.i(this,"selectedAssignment")})()
get assignmentOptions(){return this.args.assignments.map((s=>this.#m(s)))}selectAssignment(s){this.selectedAssignment=this.args.assignments.find((e=>e.id===s))}static#t=(()=>dt7948.n(this.prototype,"selectAssignment",[i.action]))()
#m(s){const e={id:s.id}
return"Topic"===s.targetType?e.name=(0,n.i18n)("edit_assignments_modal.topic"):e.name=`${(0,n.i18n)("edit_assignments_modal.post")} #${s.postNumber}`,e}static#i=(()=>(0,a.setComponentTemplate)((0,u.createTemplateFactory)({id:"q8K6z1Hy",block:'[[[1,"\\n    "],[10,0],[14,0,"control-group target"],[12],[1,"\\n      "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.assignment_label"],null]],[13],[1,"\\n      "],[8,[32,1],null,[["@value","@content","@onChange"],[[30,0,["selectedAssignment","id"]],[30,0,["assignmentOptions"]],[30,0,["selectAssignment"]]]],null],[1,"\\n    "],[13],[1,"\\n    "],[8,[32,2],null,[["@assignment","@onSubmit","@showValidationErrors"],[[30,0,["selectedAssignment"]],[30,1],false]],null],[1,"\\n  "]],["@onSubmit"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/topic-assignments.js",scope:()=>[n.i18n,o.default,r.default],isStrictMode:!0}),this))()}s.default=d})),define("discourse/plugins/discourse-assign/discourse/components/topic-level-assign-menu",["exports","@ember/application","@ember/template","discourse/helpers/user-avatar","discourse/lib/icon-library","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={id:"reassign",dependentKeys:["topic.assigned_to_user","topic.assigned_to_group","currentUser.can_assign","topic.assigned_to_user.username"],classNames:["reassign"],async action(s){if(!this.currentUser?.can_assign)return
const t=(0,e.getOwner)(this).lookup("service:task-actions"),i=(0,e.getOwner)(this).lookup("service:modal"),n=this.topic.postStream.firstPostId
switch(s){case"unassign":this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),await t.unassign(this.topic.id),this.appEvents.trigger("post-stream:refresh",{id:n})
break
case"reassign-self":this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),await t.reassignUserToTopic(this.currentUser,this.topic),this.appEvents.trigger("post-stream:refresh",{id:n})
break
case"reassign":await i.show(r.default,{model:{topic:this.topic},onSuccess:()=>this.appEvents.trigger("post-stream:refresh",{id:n})})
break
default:if(s.startsWith("unassign-from-post-")){const e=function(s){const e=s.lastIndexOf("-")+1
return s.substring(e)}(s)
await t.unassign(e,"Post"),delete this.topic.indirectly_assigned_to[e],this.appEvents.trigger("post-stream:refresh",{id:n})}}},noneItem(){return function(s){const e=function(s){const e=s.filter((s=>s.username))
let t=""
1===e.length?t=a(e[0],"tiny"):e.length>1&&(t=a(e[0],"tiny","overlap")+a(e[1],"tiny"))
return t}(s),i=`<span class="unassign-label">${(0,o.i18n)("discourse_assign.topic_level_menu.unassign_with_ellipsis")}</span>`
return{id:null,name:(0,t.htmlSafe)((0,o.i18n)("discourse_assign.topic_level_menu.unassign_with_ellipsis")),label:(0,t.htmlSafe)(`${e}${i}`)}}(this.topic.uniqueAssignees())},content(){const s=[]
return this.topic.isAssigned()&&s.push(function(s,e){let i=s.assigned_to_user?.username||s.assigned_to_group?.name
s.assigned_to_user&&e&&(i=s.assigned_to_user?.name||s.assigned_to_user?.username)
const r=s.assigned_to_user?a(s.assigned_to_user,"small"):(0,n.iconHTML)("user-xmark"),u=(0,o.i18n)("discourse_assign.topic_level_menu.unassign_from_topic",{username:i})
return{id:"unassign",name:(0,t.htmlSafe)(u),label:(0,t.htmlSafe)(`${r} ${u}`)}}(this.topic,this.siteSettings.prioritize_full_name_in_ux)),this.topic.hasAssignedPosts()&&s.push(...function(s){if(!s.hasAssignedPosts())return[]
const e=10
return Object.entries(s.indirectly_assigned_to).slice(0,e).map((s=>{let[e,i]=s
return function(s,e){let i,r
const u=!!e.assigned_to.username
u?(i=e.assigned_to.username,r=a(e.assigned_to,"small")):(i=e.assigned_to.name,r=(0,n.iconHTML)("group-times"))
const d=(0,o.i18n)("discourse_assign.topic_level_menu.unassign_from_post",{assignee:i,post_number:e.post_number}),l=(0,o.i18n)("discourse_assign.topic_level_menu.unassign_from_post_help",{assignee:i,post_number:e.post_number})
return{id:`unassign-from-post-${s}`,name:(0,t.htmlSafe)(l),label:(0,t.htmlSafe)(`${r} ${d}`)}}(e,i)}))}(this.topic)),this.topic.isAssigned()&&!this.topic.isAssignedTo(this.currentUser)&&s.push(function(){const s=(0,n.iconHTML)("user-plus"),e=(0,o.i18n)("discourse_assign.topic_level_menu.reassign_topic_to_me")
return{id:"reassign-self",name:(0,t.htmlSafe)(e),label:(0,t.htmlSafe)(`${s} ${e}`)}}()),s.push(function(){const s=(0,n.iconHTML)("pencil"),e=(0,o.i18n)("discourse_assign.topic_level_menu.edit_assignments")
return{id:"reassign",name:(0,t.htmlSafe)(e),label:(0,t.htmlSafe)(`${s} ${e}`)}}()),s},displayed(){return this.currentUser?.can_assign&&!this.site.mobileView&&(this.topic.isAssigned()||this.topic.hasAssignedPosts())}}
function a(s,e,t){return(0,i.renderAvatar)(s,{imageSize:e,extraClasses:t,ignoreTitle:!0})}})),define("discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list-empty-state",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const n=(0,i.createTemplateFactory)({id:"KVO0mpjB",block:'[[[10,0],[14,0,"empty-state"],[12],[1,"\\n  "],[10,1],[14,0,"empty-state-title"],[12],[1,"\\n    "],[1,[28,[35,2],["user.no_assignments_title"],null]],[1,"\\n  "],[13],[1,"\\n  "],[10,0],[14,0,"empty-state-body"],[12],[1,"\\n    "],[10,2],[12],[1,"\\n      "],[1,[28,[35,4],[[28,[37,2],["user.no_assignments_body"],[["icon","preferencesUrl"],[[28,[37,5],["user-plus"],null],[28,[37,6],["/my/preferences/notifications"],null]]]]],null]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],[],false,["div","span","i18n","p","html-safe","d-icon","get-url"]]',moduleName:"discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list-empty-state.hbs",isStrictMode:!1})
s.default=(0,e.setComponentTemplate)(n,(0,t.default)(void 0,"assigns-list-empty-state"))})),define("discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list",["exports","@ember/object","@ember/object/computed","discourse/components/user-menu/notifications-list","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list-empty-state"],(function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class r extends i.default{get dismissTypes(){return this.filterByTypes}get showDismiss(){return this._unreadAssignedNotificationsCount>0}get dismissTitle(){return(0,n.i18n)("user.dismiss_assigned_tooltip")}get showAllHref(){return`${this.currentUser.path}/activity/assigned`}get showAllTitle(){return(0,n.i18n)("user_menu.view_all_assigned")}get itemsCacheKey(){return"user-menu-assigns-tab"}get emptyStateComponent(){return o.default}get alwaysRenderDismissConfirmation(){return!0}get _unreadAssignedNotificationsCount(){const s=`grouped_unread_notifications.${this.site.notification_types.assigned}`
return this.currentUser.get(s)||0}get dismissConfirmationText(){return(0,n.i18n)("notifications.dismiss_confirmation.body.assigns",{count:this._unreadAssignedNotificationsCount})}async fetchItems(){return new a(await super.fetchItems()).sortedItems}}s.default=r
class a{itemsSorting=["notification.read","notification.data.message:desc","notification.created_at:desc"]
static#s=(()=>dt7948.g(this.prototype,"sortedItems",[(0,t.sort)("items","itemsSorting")]))()
#h=(()=>{dt7948.i(this,"sortedItems")})()
constructor(s){(0,e.set)(this,"items",s)}}})),define("discourse/plugins/discourse-assign/discourse/connectors/above-review-filters/assigned-to-filter",["exports","@ember/component","@ember/object","@ember/service","@ember-decorators/component"],(function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const o=dt7948.c(class extends e.default{static shouldRender(s){return s.additionalFilters}static#s=(()=>dt7948.g(this.prototype,"site",[i.service]))()
#f=(()=>{dt7948.i(this,"site")})()
static#t=(()=>dt7948.g(this.prototype,"siteSettings",[i.service]))()
#o=(()=>{dt7948.i(this,"siteSettings")})()
groupIDs=(()=>(this.siteSettings.assign_allowed_on_groups||"").split("|").filter(Boolean))()
allowedGroups=this.site.groups.filter((s=>this.groupIDs.includes(s.id.toString()))).mapBy("name")
updateAssignedTo(s){this.set("outletArgs.additionalFilters.assigned_to",s.firstObject)}static#i=(()=>dt7948.n(this.prototype,"updateAssignedTo",[t.action]))()},[(0,n.classNames)("assigned-to-filter")])
s.default=o})),define("discourse/plugins/discourse-assign/discourse/connectors/advanced-search-options-below/assigned-advanced-search",["exports","@ember/component","@ember/object","@ember/service","@ember-decorators/component"],(function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const o=dt7948.c(class extends e.default{static shouldRender(s,e){return e.currentUser?.can_assign}static#s=(()=>dt7948.g(this.prototype,"currentUser",[i.service]))()
#_=(()=>{dt7948.i(this,"currentUser")})()
onChangeAssigned(s){this.outletArgs.onChangeSearchedTermField("assigned","updateSearchTermForAssignedUsername",s)}static#t=(()=>dt7948.n(this.prototype,"onChangeAssigned",[t.action]))()},[(0,n.classNames)("assigned-advanced-search")])
s.default=o})),define("discourse/plugins/discourse-assign/discourse/connectors/category-custom-settings/assign-settings",["exports","@ember/component","@ember/object","@ember-decorators/component"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const n=dt7948.c(class extends e.default{onChangeSetting(s){this.set("outletArgs.category.custom_fields.enable_unassigned_filter",s.target.checked?"true":"false")}static#s=(()=>dt7948.n(this.prototype,"onChangeSetting",[t.action]))()},[(0,i.classNames)("assign-settings")])
s.default=n})),define("discourse/plugins/discourse-assign/discourse/connectors/group-reports-nav-item/assigned-topic-list",["exports"],(function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={shouldRender:(s,e)=>e.currentUser?.can_assign&&s.group.can_show_assigned_tab&&s.group.assignment_count>0}}))
define("discourse/plugins/discourse-assign/discourse/connectors/groups-interaction-custom-options/assignable-interaction-fields",["exports","@glimmer/component","@ember/object","discourse-i18n"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class n extends e.default{assignableLevelOptions=(()=>[{name:(0,i.i18n)("groups.alias_levels.nobody"),value:0},{name:(0,i.i18n)("groups.alias_levels.only_admins"),value:1},{name:(0,i.i18n)("groups.alias_levels.mods_and_admins"),value:2},{name:(0,i.i18n)("groups.alias_levels.members_mods_and_admins"),value:3},{name:(0,i.i18n)("groups.alias_levels.owners_mods_and_admins"),value:4},{name:(0,i.i18n)("groups.alias_levels.everyone"),value:99}])()
get assignableLevel(){return this.args.outletArgs.model.get("assignable_level")||0}onChangeAssignableLevel(s){this.args.outletArgs.model.set("assignable_level",s)}static#s=(()=>dt7948.n(this.prototype,"onChangeAssignableLevel",[t.action]))()}s.default=n})),define("discourse/plugins/discourse-assign/discourse/connectors/user-messages-nav/assigned-messages",["exports"],(function(s){"use strict"
function e(s,e){const t=e.currentUser?.can_assign
return t&&(!e.site.mobileView||s.model.isPrivateMessage)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,s.shouldShowAssigned=e
s.default={shouldRender:(s,t)=>e(s,t)}})),define("discourse/plugins/discourse-assign/discourse/connectors/user-preferences-notifications/remind-assigns-frequency",["exports"],(function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={shouldRender:(s,e)=>e.currentUser?.can_assign}})),define("discourse/plugins/discourse-assign/discourse/connectors/user-preferences-tracking-topics/notification-level-when-assigned",["exports","@glimmer/component","@ember/service","discourse-i18n","select-kit/components/combo-box","@ember/component","@ember/template-factory"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static#s=(()=>dt7948.g(this.prototype,"siteSettings",[t.service]))()
#o=(()=>{dt7948.i(this,"siteSettings")})()
constructor(s,e){super(...arguments),this.siteSettings.assign_enabled&&e.outletArgs.customAttrNames.push("notification_level_when_assigned")}get notificationLevelsWhenAssigned(){return[{name:(0,i.i18n)("user.notification_level_when_assigned.watch_topic"),value:"watch_topic"},{name:(0,i.i18n)("user.notification_level_when_assigned.track_topic"),value:"track_topic"},{name:(0,i.i18n)("user.notification_level_when_assigned.do_nothing"),value:"do_nothing"}]}static#t=(()=>(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"BrcWW3VY",block:'[[[1,"\\n"],[41,[30,0,["siteSettings","assign_enabled"]],[[[1,"      "],[10,0],[14,0,"controls controls-dropdown"],[14,"data-setting-name","user-notification-level-when-assigned"],[12],[1,"\\n        "],[10,"label"],[12],[1,[28,[32,0],["user.notification_level_when_assigned.label"],null]],[13],[1,"\\n        "],[8,[32,1],null,[["@content","@value","@valueProperty","@onChange"],[[30,0,["notificationLevelsWhenAssigned"]],[30,1,["model","user_option","notification_level_when_assigned"]],"value",[28,[31,1],[[30,0],[28,[31,2],[[30,1,["model","user_option","notification_level_when_assigned"]]],null]],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "]],["@outletArgs"],false,["if","action","mut"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/user-preferences-tracking-topics/notification-level-when-assigned.js",scope:()=>[i.i18n,n.default],isStrictMode:!0}),this))()}s.default=a})),define("discourse/plugins/discourse-assign/discourse/controllers/bulk-assign",["exports","@ember/controller","@ember/object"],(function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class i extends e.default{static#s=(()=>dt7948.g(this.prototype,"topicBulkActions",[e.inject]))()
#b=(()=>{dt7948.i(this,"topicBulkActions")})()
model
formApi={submit(){}}
async assign(){return this.topicBulkActions.performAndRefresh({type:"assign",username:this.model.username,note:this.model.note})}static#t=(()=>dt7948.n(this.prototype,"assign",[t.action]))()}s.default=i})),define("discourse/plugins/discourse-assign/discourse/controllers/group-assigned-show",["exports","@ember/controller","@ember/object","@ember/object/computed","@ember/service","discourse/controllers/user-topics-list","discourse/lib/bulk-select-helper","discourse/lib/debounce","discourse/lib/environment"],(function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class d extends o.default{static#s=(()=>dt7948.g(this.prototype,"taskActions",[n.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
static#t=(()=>dt7948.g(this.prototype,"router",[n.service]))()
#u=(()=>{dt7948.i(this,"router")})()
static#i=(()=>dt7948.g(this.prototype,"user",[e.inject]))()
#y=(()=>{dt7948.i(this,"user")})()
queryParams=["order","ascending","search"]
order=""
ascending=!1
search=""
bulkSelectEnabled=!1
bulkSelectHelper=(()=>new r.default(this))()
selected=[]
static#r=(()=>dt7948.g(this.prototype,"canBulkSelect",[(0,i.alias)("currentUser.staff")]))()
#v=(()=>{dt7948.i(this,"canBulkSelect")})()
_setSearchTerm(s){this.set("search",s),this.refreshModel()}refreshModel(){this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search,direct:this.model.params.direct}}).then((s=>this.set("model",s))).finally((()=>{this.set("loading",!1)}))}async unassign(s){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic"
await this.taskActions.unassign(s,e),this.router.refresh()}static#a=(()=>dt7948.n(this.prototype,"unassign",[t.action]))()
reassign(s){this.taskActions.showAssignModal(s,{onSuccess:()=>this.router.refresh()})}static#d=(()=>dt7948.n(this.prototype,"reassign",[t.action]))()
changeSort(s){s===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:s,ascending:!1}),this.refreshModel())}static#l=(()=>dt7948.n(this.prototype,"changeSort",[t.action]))()
onChangeFilter(s){(0,a.default)(this,this._setSearchTerm,s,2*u.INPUT_DELAY)}static#A=(()=>dt7948.n(this.prototype,"onChangeFilter",[t.action]))()
toggleBulkSelect(){this.toggleProperty("bulkSelectEnabled")}static#w=(()=>dt7948.n(this.prototype,"toggleBulkSelect",[t.action]))()
refresh(){this.refreshModel()}static#T=(()=>dt7948.n(this.prototype,"refresh",[t.action]))()}s.default=d})),define("discourse/plugins/discourse-assign/discourse/controllers/group-assigned",["exports","@ember/controller","@ember/object","@ember/service","discourse/lib/ajax","discourse/lib/debounce","discourse/lib/decorators","discourse/lib/environment"],(function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class u extends e.default{static#s=(()=>dt7948.g(this.prototype,"router",[i.service]))()
#u=(()=>{dt7948.i(this,"router")})()
static#t=(()=>dt7948.g(this.prototype,"application",[e.inject]))()
#k=(()=>{dt7948.i(this,"application")})()
loading=!1
offset=0
filterName=""
filter=""
order(s){return s||""}static#i=(()=>dt7948.n(this.prototype,"order",[(0,r.default)("router.currentRoute.queryParams.order")]))()
ascending(s){return s||!1}static#r=(()=>dt7948.n(this.prototype,"ascending",[(0,r.default)("router.currentRoute.queryParams.ascending")]))()
search(s){return s||""}static#a=(()=>dt7948.n(this.prototype,"search",[(0,r.default)("router.currentRoute.queryParams.search")]))()
isDesktop(s){return!s}static#d=(()=>dt7948.n(this.prototype,"isDesktop",[(0,r.default)("site.mobileView")]))()
_setFilter(s){this.set("loading",!0),this.set("offset",0),this.set("filter",s)
const e=this.group.name;(0,n.ajax)(`/assign/members/${e}`,{type:"GET",data:{filter:this.filter,offset:this.offset}}).then((s=>{"everyone"!==this.router.currentRoute.params.filter&&this.router.transitionTo("group.assigned.show",e,"everyone"),this.set("members",s.members)})).finally((()=>{this.set("loading",!1)}))}findMembers(s){s?this.set("members",this.model.members):!this.loading&&this.model&&this.model.members.length>=this.offset+50&&(this.set("loading",!0),this.set("offset",this.offset+50),(0,n.ajax)(`/assign/members/${this.group.name}`,{type:"GET",data:{filter:this.filter,offset:this.offset}}).then((s=>{this.members.pushObjects(s.members)})).finally((()=>this.set("loading",!1))))}loadMore(){this.findMembers()}static#l=(()=>dt7948.n(this.prototype,"loadMore",[t.action]))()
onChangeFilterName(s){(0,o.default)(this,this._setFilter,s,2*a.INPUT_DELAY)}static#A=(()=>dt7948.n(this.prototype,"onChangeFilterName",[t.action]))()}s.default=u})),define("discourse/plugins/discourse-assign/discourse/controllers/user-activity-assigned",["exports","@ember/controller","@ember/object","@ember/service","@ember/template","discourse/controllers/user-topics-list","discourse/lib/debounce","discourse/lib/decorators","discourse/lib/environment","discourse/lib/get-url","discourse/lib/icon-library","discourse-i18n"],(function(s,e,t,i,n,o,r,a,u,d,l,c){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class g extends o.default{static#s=(()=>dt7948.g(this.prototype,"taskActions",[i.service]))()
#e=(()=>{dt7948.i(this,"taskActions")})()
static#t=(()=>dt7948.g(this.prototype,"user",[e.inject]))()
#y=(()=>{dt7948.i(this,"user")})()
queryParams=["order","ascending","search"]
order=""
ascending=!1
search=""
doesntHaveAssignments(s,e){return!e&&!s}static#i=(()=>dt7948.n(this.prototype,"doesntHaveAssignments",[(0,a.default)("model.topics.length","search")]))()
emptyStateBody(){return(0,n.htmlSafe)((0,c.i18n)("user.no_assignments_body",{preferencesUrl:(0,d.default)("/my/preferences/notifications"),icon:(0,l.iconHTML)("user-plus")}))}static#r=(()=>dt7948.n(this.prototype,"emptyStateBody",[a.default]))()
_setSearchTerm(s){this.set("search",s),this.refreshModel()}refreshModel(){this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search}}).then((s=>this.set("model",s))).finally((()=>{this.set("loading",!1)}))}changeSort(s){s===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:s,ascending:!1}),this.refreshModel())}static#a=(()=>dt7948.n(this.prototype,"changeSort",[t.action]))()
onChangeFilter(s){(0,r.default)(this,this._setSearchTerm,s,2*u.INPUT_DELAY)}static#d=(()=>dt7948.n(this.prototype,"onChangeFilter",[t.action]))()}s.default=g})),define("discourse/plugins/discourse-assign/discourse/initializers/assign-extend-user-messages",["exports","discourse/lib/plugin-api","discourse-i18n"],(function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={name:"assign-extend-user-messages",initialize(s){(0,e.withPluginApi)("1.5.0",(e=>{const i=s.lookup("service:current-user")
i?.can_assign&&e.addUserMessagesNavigationDropdownRow&&e.addUserMessagesNavigationDropdownRow("userPrivateMessages.assigned",(0,t.i18n)("discourse_assign.assigned"),"user-plus")}))}}})),define("discourse/plugins/discourse-assign/discourse/initializers/assign-user-menu",["exports","@ember/template","discourse/lib/plugin-api","discourse/lib/text","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list"],(function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={name:"assign-user-menu",initialize(s){(0,t.withPluginApi)("1.2.0",(t=>{if(!s.lookup("service:site-settings").assign_enabled)return
const r=t.getCurrentUser()
r?.can_assign&&(t.registerNotificationTypeRenderer&&t.registerNotificationTypeRenderer("assigned",(s=>class extends s{get linkTitle(){return this.isGroup()?(0,n.i18n)(`user.assigned_to_group.${this.postOrTopic()}`,{group_name:this.notification.data.display_username}):(0,n.i18n)(`user.assigned_to_you.${this.postOrTopic()}`)}get icon(){return this.isGroup()?"group-plus":"user-plus"}get label(){return this.isGroup()?this.notification.data.display_username:""}get description(){return(0,e.htmlSafe)((0,i.emojiUnescape)((0,n.i18n)(`user.assignment_description.${this.postOrTopic()}`,{topic_title:this.notification.fancy_title,post_number:this.notification.post_number})))}isGroup(){return"discourse_assign.assign_group_notification"===this.notification.data.message}postOrTopic(){return 1===this.notification.post_number?"topic":"post"}})),t.registerUserMenuTab&&t.registerUserMenuTab((s=>class extends s{id="assign-list"
panelComponent=(()=>o.default)()
icon="user-plus"
notificationTypes=["assigned"]
get count(){return this.getUnreadCountForType("assigned")}get linkWhenActive(){return`${this.currentUser.path}/activity/assigned`}})))}))}}})),define("discourse/plugins/discourse-assign/discourse/initializers/assignment-list-actions",["exports","discourse/lib/plugin-api","discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-column","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const r=["userActivity.assigned","group.assigned.show"],a=(0,i.setComponentTemplate)((0,n.createTemplateFactory)({id:"NpvT5AIj",block:'[[[1,"\\n  "],[10,"td"],[14,0,"assign-topic-buttons"],[12],[1,"\\n    "],[8,[32,0],null,[["@topic"],[[30,1]]],null],[1,"\\n  "],[13],[1,"\\n"]],["@topic"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/initializers/assignment-list-actions.js",scope:()=>[t.default],isStrictMode:!0}),(0,o.default)(void 0,"assignment-list-actions:AssignActionsCell"))
s.default={name:"assignment-list-dropdowns",initialize(s){const t=s.lookup("service:router");(0,e.withPluginApi)("1.39.0",(s=>{s.registerValueTransformer("topic-list-columns",(s=>{let{value:e}=s
return r.includes(t.currentRouteName)&&e.add("assign-actions",{item:a,after:"activity"}),e})),s.registerValueTransformer("topic-list-item-class",(s=>{let{value:e}=s
return r.includes(t.currentRouteName)&&e.push("assigned-list-item"),e}))}))}}})),define("discourse/plugins/discourse-assign/discourse/initializers/extend-for-assigns",["exports","@ember/application","@ember/object","@ember/template","@ember/utils","virtual-dom","discourse/helpers/user-avatar","discourse/lib/decorators","discourse/lib/deprecated","discourse/lib/get-url","discourse/lib/icon-library","discourse/lib/plugin-api","discourse/lib/register-topic-footer-dropdown","discourse/lib/transformer","discourse/lib/utilities","discourse/widgets/raw-html","discourse/widgets/render-glimmer","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/assign-button","discourse/plugins/discourse-assign/discourse/components/bulk-actions/bulk-assign-user","discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments","discourse/plugins/discourse-assign/discourse/components/post-assignments-display","discourse/plugins/discourse-assign/discourse/components/topic-level-assign-menu","discourse/plugins/discourse-assign/discourse/lib/url","discourse/plugins/discourse-assign/discourse/models/topic","@ember/template-factory"],(function(s,e,t,i,n,o,r,a,u,d,l,c,g,p,m,h,f,_,b,y,v,A,w,T,k,S){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const x=["topic.assigned_to_user","topic.assigned_to_group","currentUser.can_assign","topic.assigned_to_user.username","topic.assigned_to_user.name"]
function P(s){const e=s.assigned_to_user?.username||s.assigned_to_group?.name
return e?(0,_.i18n)("discourse_assign.unassign.help",{username:e}):(0,_.i18n)("discourse_assign.assign.help")}function M(s){const e=s.container.lookup("service:site-settings"),r=s.getCurrentUser();(e.assigns_public||r?.can_assign)&&(s.addNavigationBarItem({name:"unassigned",customFilter:s=>"true"===s?.custom_fields?.enable_unassigned_filter,customHref:s=>{if(s)return(0,d.default)(s.url)+"/l/latest?status=open&assigned=nobody"},forceActive:(s,e)=>{const t=e.currentRouteQueryParams
return t&&2===Object.keys(t).length&&"nobody"===t.assigned&&"open"===t.status},before:"top"}),s.getCurrentUser()?.can_assign&&function(s){s.registerValueTransformer("post-menu-buttons",(s=>{let{value:e,context:{post:t,state:i,firstButtonKey:n,lastHiddenButtonKey:o,secondLastHiddenButtonKey:r}}=s
e.add("assign",b.default,t.assigned_to_user?.id===i.currentUser.id?{before:n}:{before:o,after:r})}))}(s)),s.addAdvancedSearchOptions(s.getCurrentUser()?.can_assign?{inOptionsForUsers:[{name:(0,_.i18n)("search.advanced.in.assigned"),value:"assigned"},{name:(0,_.i18n)("search.advanced.in.unassigned"),value:"unassigned"}]}:{}),s.modifyClass("model:bookmark",(s=>class extends s{assignedToUserPath(s){return(0,T.assignedToUserPath)(s)}static#s=(()=>dt7948.n(this.prototype,"assignedToUserPath",[(0,a.default)("assigned_to_user")]))()
assignedToGroupPath(s){return(0,T.assignedToGroupPath)(s)}static#t=(()=>dt7948.n(this.prototype,"assignedToGroupPath",[(0,a.default)("assigned_to_group")]))()})),s.modifyClass("component:topic-notifications-button",(s=>class extends s{get reasonText(){return this.currentUser.never_auto_track_topics&&this.args.topic.get("assigned_to_user.username")===this.currentUser.username?(0,_.i18n)("notification_reason.user"):super.reasonText}})),s.addDiscoveryQueryParam("assigned",{replace:!0,refreshModel:!0}),s.addTagsHtmlCallback((function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
const[i,n,o]=Object.values(s.getProperties("assigned_to_user","assigned_to_group","assignment_note","assignment_status")),r={assignee:i||n,note:o}
let a
a=s.indirectly_assigned_to?Object.entries(s.indirectly_assigned_to).map((s=>{let[e,t]=s
return t.assigned_to.assignedToPostId=e,t})):[]
const u=[].concat(r,a.map((s=>({assignee:s.assigned_to,note:s.assignment_note})))).filter((s=>{let{assignee:e}=s
return e})).flat()
if(!u)return""
const c=i=>{let n,{assignee:o,note:r}=i
n=o.assignedToPostId?`/p/${o.assignedToPostId}`:`/t/${s.id}`
const a=(0,l.iconHTML)(o.username?"user-plus":"group-plus"),u=(e.prioritize_full_name_in_ux||!o.username)&&o.name||o.username,c=t.tagName||"a"
return`<${c} class="assigned-to discourse-tag simple" ${"a"===c?`href="${(0,d.default)(n)}" data-auto-route="true"`:""}>${a}<span title="${(0,m.escapeExpression)(r)}">${u}</span></${c}>`}
if(1===u.length)return c(u[0])
let g=""
return u.forEach(((e,t)=>{if(g+=c(e),t<u.length-1){const e=(0,p.applyValueTransformer)("tag-separator",",",{topic:s,index:t})
g+=`<span class="discourse-tags__tag-separator">${e}</span>`}})),g})),s.modifyClass("model:group",(s=>class extends s{asJSON(){return Object.assign({},super.asJSON(...arguments),{assignable_level:this.assignable_level})}})),s.modifyClass("controller:topic",(s=>class extends s{subscribe(){super.subscribe(...arguments),this.messageBus.subscribe("/staff/topic-assignment",(s=>{const e=this.model,t=e.id
if(s.topic_id===t){let t
s.post_id&&(t=e.postStream.posts.find((e=>e.id===s.post_id)))
const i=t||e
i.set("assignment_note",s.assignment_note),i.set("assignment_status",s.assignment_status),"User"===s.assigned_type&&(i.set("assigned_to_user_id","assigned"===s.type?s.assigned_to.id:null),i.set("assigned_to_user",s.assigned_to)),"Group"===s.assigned_type&&(i.set("assigned_to_group_id","assigned"===s.type?s.assigned_to.id:null),i.set("assigned_to_group",s.assigned_to)),s.post_id&&("unassigned"===s.type&&delete e.indirectly_assigned_to[s.post_number],this.appEvents.trigger("post-stream:refresh",{id:e.postStream.posts[0].id}),this.appEvents.trigger("post-stream:refresh",{id:s.post_id})),e.closed&&this.appEvents.trigger("post-stream:refresh",{id:e.postStream.posts[0].id})}this.appEvents.trigger("header:update-topic",e),this.appEvents.trigger("post-stream:refresh",{id:e.postStream.posts[0].id})}))}unsubscribe(){super.unsubscribe(...arguments),this.model?.id&&this.messageBus.unsubscribe("/staff/topic-assignment")}})),function(s,e){s.addTrackedPostProperties("assigned_to_user","assigned_to_group"),s.modifyClass("model:post",(s=>class extends s{get can_edit(){return!!j(this.action_code)||super.can_edit}set can_edit(s){super.can_edit=s}get isSmallAction(){return!!j(this.action_code)||super.isSmallAction}})),s.renderAfterWrapperOutlet("post-content-cooked-html",A.default),s.addPostSmallActionClassesCallback((s=>{if((s.action_code||s.actionCode).includes("assigned")&&!e.assigns_public)return["private-assign"]})),s.addPostSmallActionIcon("assigned","user-plus"),s.addPostSmallActionIcon("assigned_to_post","user-plus"),s.addPostSmallActionIcon("assigned_group","group-plus"),s.addPostSmallActionIcon("assigned_group_to_post","group-plus"),s.addPostSmallActionIcon("unassigned","user-xmark"),s.addPostSmallActionIcon("unassigned_group","group-times"),s.addPostSmallActionIcon("unassigned_from_post","user-xmark"),s.addPostSmallActionIcon("unassigned_group_from_post","group-times"),s.addPostSmallActionIcon("reassigned","user-plus"),s.addPostSmallActionIcon("reassigned_group","group-plus"),(0,u.withSilencedDeprecations)("discourse.post-stream-widget-overrides",(()=>function(s){s.decorateWidget("post-contents:after-cooked",(s=>{const e=s.getModel()
if(e){let t,i,n,o
if(1===s.attrs.post_number)return s.widget.attach("assigned-to-first-post",{topic:e.topic})
if(n=e.topic.indirectly_assigned_to?.[e.id]?.assigned_to,n?.username&&(t=n),n?.name&&(i=n),(t||i)&&(o=t?(0,T.assignedToUserPath)(t):(0,T.assignedToGroupPath)(i)),o)return s.widget.attach("assigned-to-post",{assignedToUser:t,assignedToGroup:i,href:o,post:e})}})),s.createWidget("assigned-to-post",{html(s){return new f.default(this,"p.assigned-to",(0,S.createTemplateFactory)({id:"m6Kc+XrX",block:'[[[1,"\\n          "],[8,[39,0],null,[["@assignedToUser","@assignedToGroup","@href","@post"],[[30,1,["assignedToUser"]],[30,1,["assignedToGroup"]],[30,1,["href"]],[30,1,["post"]]]],null]],["@data"],false,["assigned-to-post"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/initializers/extend-for-assigns.js",isStrictMode:!1}),{assignedToUser:s.post.assigned_to_user,assignedToGroup:s.post.assigned_to_group,href:s.href,post:s.post})}}),s.createWidget("assigned-to-first-post",{html(s){const e=s.topic,[t,r,a]=[e.assigned_to_user,e.assigned_to_group,e.indirectly_assigned_to],u=[],d=(s,e,t)=>`<span class="assigned-to--${t}">${(0,i.htmlSafe)((0,_.i18n)("discourse_assign.assigned_topic_to",{username:s,path:e}))}</span>`
let c=""
if(t&&(c=this.siteSettings.prioritize_full_name_in_ux&&t.name||t.username,u.push((0,o.h)("span.assignee",new h.default({html:d(c,(0,T.assignedToUserPath)(t),"user")})))),r&&u.push((0,o.h)("span.assignee",new h.default({html:d(r.name,(0,T.assignedToGroupPath)(r),"group")}))),a&&Object.keys(a).map((s=>{const t=a[s].assigned_to,i=a[s].post_number
c=this.siteSettings.prioritize_username_in_ux&&t.username?t.username:t.name||t.username,u.push((0,o.h)("span.assignee",[(0,o.h)("a",{attributes:{class:"assigned-indirectly",href:`${e.url}/${i}`}},(0,_.i18n)("discourse_assign.assign_post_to_multiple",{post_number:i,username:c}))]))})),!(0,n.isEmpty)(u))return(0,o.h)("p.assigned-to",[t?(0,l.iconNode)("user-plus"):(0,l.iconNode)("group-plus"),t||r?"":(0,o.h)("span.assign-text",(0,_.i18n)("discourse_assign.assigned")),u])}}),s.addPostTransformCallback((s=>{j(s.actionCode)&&(s.isSmallAction=!0,s.canEdit=!0)}))}(s)))}(s,e),s.replaceIcon("notification.assigned","user-plus"),s.replaceIcon("notification.discourse_assign.assign_group_notification","group-plus"),s.modifyClass("controller:preferences/notifications",(s=>class extends s{save(){this.saveAttrNames.push("custom_fields"),super.save(...arguments)}static#s=(()=>dt7948.n(this.prototype,"save",[t.action]))()})),s.addKeyboardShortcut("g a","",{path:"/my/activity/assigned"})}function j(s){return["assigned","unassigned","reassigned","assigned_group","unassigned_group","reassigned_group","assigned_to_post","assigned_group_to_post","unassigned_from_post","unassigned_group_from_post","details_change","note_change","status_change"].includes(s)}const O=/^(assigned:)/gi
s.default={name:"extend-for-assign",initialize(s){s.lookup("service:site-settings").assign_enabled&&(0,c.withPluginApi)("1.34.0",(t=>{const n=s.lookup("service:current-user")
n?.can_assign&&t.modifyClass("component:search-advanced-options",(s=>class extends s{updateSearchTermForAssignedUsername(){const s=this.filterBlocks(O),e=this.searchedTerms?.assigned
let t=this.searchTerm||"",i="assigned"
0!==e?.length?(0!==s.length?t=t.replace(s[0],`${i}:${e}`):t+=` ${i}:${e}`,this._updateSearchTerm(t)):0!==s.length&&(t=t.replace(s[0],""),this._updateSearchTerm(t))}})),(0,k.extendTopicModel)(t),M(t),function(s){(0,g.registerTopicFooterDropdown)(w.default),s.registerTopicFooterButton({id:"assign",icon(){return this.topic.isAssigned()?this.site.mobileView?"user-xmark":null:"user-plus"},priority:250,translatedTitle(){return P(this.topic)},translatedAriaLabel(){return P(this.topic)},translatedLabel:()=>(0,_.i18n)("discourse_assign.assign.title"),async action(){if(!this.currentUser?.can_assign)return
const s=(0,e.getOwner)(this).lookup("service:task-actions"),t=(0,e.getOwner)(this).lookup("service:modal")
this.topic.isAssigned()?(this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),await s.unassign(this.topic.id,"Topic"),this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})):await t.show(v.default,{model:{topic:this.topic},onSuccess:()=>this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})})},dropdown(){return this.site.mobileView},classNames:["assign"],dependentKeys:x,displayed(){return this.currentUser?.can_assign&&!this.topic.isAssigned()&&!this.topic.hasAssignedPosts()}}),s.registerTopicFooterButton({id:"unassign-mobile-header",translatedTitle(){return P(this.topic)},translatedAriaLabel(){return P(this.topic)},translatedLabel(){const s=this.topic.assigned_to_user,e=this.topic.assigned_to_group,t=(0,_.i18n)("discourse_assign.assigned_to_w_ellipsis")
return s?(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${t}</span><span class="username">${s.username}</span></span>${(0,r.renderAvatar)(s,{imageSize:"small",ignoreTitle:!0})}`):e?(0,i.htmlSafe)(`<span class="unassign-label">${t}</span> @${e.name}`):void 0},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:x,displayed(){return this.currentUser?.can_assign&&this.site.mobileView}}),s.registerTopicFooterButton({id:"unassign-mobile",icon:()=>"user-xmark",translatedTitle(){return P(this.topic)},translatedAriaLabel(){return P(this.topic)},translatedLabel(){const s=(0,_.i18n)("discourse_assign.unassign.title")
return(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${s}</span></span>`)},action(){if(!this.currentUser?.can_assign)return
const s=(0,e.getOwner)(this).lookup("service:task-actions")
this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.unassign(this.topic.id).then((()=>{this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})}))},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:x,displayed(){return this.currentUser?.can_assign&&this.site.mobileView&&this.topic.isAssigned()}}),s.registerTopicFooterButton({id:"reassign-self-mobile",icon:()=>"user-plus",translatedTitle:()=>(0,_.i18n)("discourse_assign.reassign.to_self_help"),translatedAriaLabel:()=>(0,_.i18n)("discourse_assign.reassign.to_self_help"),translatedLabel(){const s=(0,_.i18n)("discourse_assign.reassign.to_self")
return(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${s}</span></span>`)},async action(){if(!this.currentUser?.can_assign)return
const s=(0,e.getOwner)(this).lookup("service:task-actions")
this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),await s.reassignUserToTopic(this.currentUser,this.topic),this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:x,displayed(){return this.site.mobileView&&this.currentUser?.can_assign&&this.topic.isAssigned()&&this.topic.assigned_to_user?.username!==this.currentUser.username}}),s.registerTopicFooterButton({id:"reassign-mobile",icon:()=>"group-plus",translatedTitle:()=>(0,_.i18n)("discourse_assign.reassign.help"),translatedAriaLabel:()=>(0,_.i18n)("discourse_assign.reassign.help"),translatedLabel(){const s=(0,_.i18n)("discourse_assign.reassign.title_w_ellipsis")
return(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${s}</span></span>`)},async action(){if(!this.currentUser?.can_assign)return
const s=(0,e.getOwner)(this).lookup("service:task-actions")
await s.showAssignModal(this.topic,{targetType:"Topic",isAssigned:this.topic.isAssigned(),onSuccess:()=>this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})})},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:x,displayed(){return this.currentUser?.can_assign&&this.site.mobileView}})}(t),t.addSearchSuggestion("in:assigned"),t.addSearchSuggestion("in:unassigned"),t.addGroupPostSmallActionCode("assigned_group"),t.addGroupPostSmallActionCode("reassigned_group"),t.addGroupPostSmallActionCode("unassigned_group"),t.addGroupPostSmallActionCode("assigned_group_to_post"),t.addGroupPostSmallActionCode("unassigned_group_from_post"),t.addUserSearchOption("assignableGroups"),t.addSaveableUserOptionField("notification_level_when_assigned"),t.addBulkActionButton({id:"assign-topics",label:"topics.bulk.assign",icon:"user-plus",class:"btn-default assign-topics",action(s){let{setComponent:e}=s
e(y.default)},actionType:"setComponent"}),t.addBulkActionButton({id:"unassign-topics",label:"topics.bulk.unassign",icon:"user-xmark",class:"btn-default unassign-topics",action(s){let{performAndRefresh:e}=s
e({type:"unassign"})},actionType:"performAndRefresh"})}))}}})),define("discourse/plugins/discourse-assign/discourse/lib/url",["exports","discourse/lib/get-owner","discourse/lib/get-url"],(function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.assignedToGroupPath=function(s){return(0,t.default)(`/g/${s.name}/assigned/everyone`)},s.assignedToUserPath=function(s){const i=(0,e.getOwnerWithFallback)(this).lookup("service:site-settings")
return(0,t.default)(i.assigns_user_url_path.replace("{username}",s.username))}})),define("discourse/plugins/discourse-assign/discourse/models/assignment",["exports","@glimmer/tracking","@ember/object"],(function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.Assignment=void 0
class i extends t.default{static fromTopic(s){const e=new i
return e.id=0,e.username=s.assigned_to_user?.username,e.groupName=s.assigned_to_group?.name,e.status=s.assignment_status,e.note=s.assignment_note,e.targetId=s.id,e.targetType="Topic",e}static fromPost(s){const e=new i
return e.username=s.assigned_to.username,e.name=s.assigned_to.name,e.groupName=s.assigned_to.name,e.status=s.assignment_status,e.note=s.assignment_note,e.targetId=s.postId,e.targetType="Post",e.postNumber=s.post_number,e.id=s.post_number,e}static#s=(()=>dt7948.g(this.prototype,"group_name",[e.tracked]))()
#S=(()=>{dt7948.i(this,"group_name")})()
static#t=(()=>dt7948.g(this.prototype,"username",[e.tracked]))()
#x=(()=>{dt7948.i(this,"username")})()
static#i=(()=>dt7948.g(this.prototype,"name",[e.tracked]))()
#P=(()=>{dt7948.i(this,"name")})()
static#r=(()=>dt7948.g(this.prototype,"status",[e.tracked]))()
#M=(()=>{dt7948.i(this,"status")})()
static#a=(()=>dt7948.g(this.prototype,"note",[e.tracked]))()
#j=(()=>{dt7948.i(this,"note")})()
targetId
targetType
postNumber
isEdited=!1}s.Assignment=i})),define("discourse/plugins/discourse-assign/discourse/models/topic",["exports","discourse/plugins/discourse-assign/discourse/models/assignment"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.extendTopicModel=function(s){s.modifyClass("model:topic",(s=>class extends s{assignees(){const s=[]
this.assigned_to_user&&s.push(this.assigned_to_user)
const e=this.assignedPosts().map((s=>s.assigned_to))
return s.push(...e),s}uniqueAssignees(){const s=new Map
return this.assignees().forEach((e=>s.set(e.username,e))),[...s.values()]}assignedPosts(){return this.indirectly_assigned_to?Object.entries(this.indirectly_assigned_to).map((s=>{let[e,t]=s
return t.postId=e,t})):[]}assignments(){return[this.topicAssignment(),...this.postAssignments()].compact()}postAssignments(){return this.indirectly_assigned_to?Object.entries(this.indirectly_assigned_to).map((s=>{let[t,i]=s
return i.postId=t,e.Assignment.fromPost(i)})):[]}topicAssignment(){return e.Assignment.fromTopic(this)}isAssigned(){return this.assigned_to_user||this.assigned_to_group}isAssignedTo(s){return this.assigned_to_user?.username===s.username}hasAssignedPosts(){return!!this.postAssignments().length}}))}})),define("discourse/plugins/discourse-assign/discourse/pre-initializers/extend-category-for-assign",["exports","@ember/object","discourse/models/category"],(function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={name:"extend-category-for-assign",before:"inject-discourse-objects",initialize(){t.default.reopen({enable_unassigned_filter:(0,e.computed)("custom_fields.enable_unassigned_filter",{get(){return"true"===this?.custom_fields?.enable_unassigned_filter}})})}}})),define("discourse/plugins/discourse-assign/discourse/routes/group-assigned-show",["exports","discourse/lib/cached-topic-list","discourse/routes/discourse"],(function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class i extends t.default{model(s){let t
return t=["everyone",this.modelFor("group").name].includes(s.filter)?`topics/group-topics-assigned/${this.modelFor("group").name}`:`topics/messages-assigned/${s.filter}`,(0,e.findOrResetCachedTopicList)(this.session,t)||this.store.findFiltered("topicList",{filter:t,params:{order:s.order,ascending:s.ascending,search:s.search,direct:"everyone"!==s.filter}})}setupController(s,e){s.setProperties({model:e,search:this.currentModel.params.search})}}s.default=i})),define("discourse/plugins/discourse-assign/discourse/routes/group-assigned",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],(function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class n extends i.default{static#s=(()=>dt7948.g(this.prototype,"router",[e.service]))()
#u=(()=>{dt7948.i(this,"router")})()
model(){return(0,t.ajax)(`/assign/members/${this.modelFor("group").name}`)}setupController(s,e){s.setProperties({model:e,members:[],group:this.modelFor("group")}),s.group.setProperties({assignment_count:e.assignment_count,group_assignment_count:e.group_assignment_count}),s.findMembers(!0)}redirect(s,e){e.to.params.hasOwnProperty("filter")||this.router.transitionTo("group.assigned.show","everyone")}}s.default=n})),define("discourse/plugins/discourse-assign/discourse/routes/user-activity-assigned",["exports","@ember/service","discourse/lib/cookie","discourse/routes/user-topic-list","discourse-i18n"],(function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class o extends i.default{static#s=(()=>dt7948.g(this.prototype,"router",[e.service]))()
#u=(()=>{dt7948.i(this,"router")})()
templateName="user-activity-assigned"
controllerName="user-activity-assigned"
userActionType=16
noContentHelpKey="discourse_assigns.no_assigns"
beforeModel(){this.currentUser||((0,t.default)("destination_url",window.location.href),this.router.transitionTo("login"))}model(s){return this.store.findFiltered("topicList",{filter:`topics/messages-assigned/${this.modelFor("user").username_lower}`,params:{exclude_category_ids:[-1],order:s.order,ascending:s.ascending,search:s.search}})}titleToken(){return(0,n.i18n)("discourse_assign.assigned")}}s.default=o})),define("discourse/plugins/discourse-assign/discourse/routes/user-private-messages-assigned-index",["exports","discourse/routes/build-private-messages-route"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.default)("assigned","private-messages-assigned","assigned")})),define("discourse/plugins/discourse-assign/discourse/services/task-actions",["exports","@glimmer/tracking","@ember/service","@ember/utils","discourse/lib/ajax","discourse/lib/ajax-error","discourse/plugins/discourse-assign/discourse/components/modal/assign-user"],(function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends t.default{static#s=(()=>dt7948.g(this.prototype,"modal",[t.service]))()
#O=(()=>{dt7948.i(this,"modal")})()
static#t=(()=>dt7948.g(this.prototype,"allowedGroups",[e.tracked]))()
#C=(()=>{dt7948.i(this,"allowedGroups")})()
static#i=(()=>dt7948.g(this.prototype,"allowedGroupsForAssignment",[e.tracked]))()
#U=(()=>{dt7948.i(this,"allowedGroupsForAssignment")})()
#F
static#r=(()=>dt7948.g(this.prototype,"_suggestions",[e.tracked]))()
#N=(()=>{dt7948.i(this,"_suggestions")})()
get suggestions(){return this._suggestions?this._suggestions:(this.#F||=this.#E(),null)}async#E(){const s=await(0,n.ajax)("/assign/suggestions")
this.isDestroying||this.isDestroyed||(this._suggestions=s.suggestions,this.allowedGroups=s.assign_allowed_on_groups,this.allowedGroupsForAssignment=s.assign_allowed_for_groups)}unassign(s){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic"
return(0,n.ajax)("/assign/unassign",{type:"PUT",data:{target_id:s,target_type:e}})}async unassignPost(s){await this.unassign(s.id,"Post"),delete s.topic.indirectly_assigned_to[s.id]}showAssignModal(s,e){let{isAssigned:t=!1,targetType:i="Topic",onSuccess:n}=e
return this.modal.show(r.default,{model:{reassign:t,username:s.assigned_to_user?.username,group_name:s.assigned_to_group?.name,status:s.assignment_status,target:s,targetType:i,onSuccess:n}})}showAssignPostModal(s){return this.showAssignModal(s,{targetType:"Post"})}reassignUserToTopic(s,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Topic"
return(0,n.ajax)("/assign/assign",{type:"PUT",data:{username:s.username,target_id:e.id,target_type:t,status:e.assignment_status}})}async assign(s){(0,i.isEmpty)(s.username)&&s.target.set("assigned_to_user",null),(0,i.isEmpty)(s.group_name)&&s.target.set("assigned_to_group",null)
let e="/assign/assign";(0,i.isEmpty)(s.username)&&(0,i.isEmpty)(s.group_name)&&(e="/assign/unassign")
try{await(0,n.ajax)(e,{type:"PUT",data:{username:s.username,group_name:s.group_name,target_id:s.target.id,target_type:s.targetType,note:s.note,status:s.status}}),s.onSuccess?.()}catch(t){(0,o.popupAjaxError)(t)}}async putAssignment(s){await(0,n.ajax)("/assign/assign",{type:"PUT",data:{username:s.username,group_name:s.group_name,target_id:s.targetId,target_type:s.targetType,note:s.note,status:s.status}})}}s.default=a})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/above-review-filters/assigned-to-filter",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"bCejaLo5",block:'[[[10,0],[14,0,"reviewable-filter discourse-assign-assign-to-filter"],[12],[1,"\\n  "],[10,"label"],[14,0,"filter-label"],[12],[1,[28,[35,2],["discourse_assign.assigned_to"],null]],[13],[1,"\\n\\n  "],[8,[39,3],[[24,"autocomplete","off"]],[["@value","@onChange","@options"],[[30,0,["outletArgs","additionalFilters","assigned_to"]],[30,0,["updateAssignedTo"]],[28,[37,4],null,[["maximum","fullWidthWrap","includeGroups","groupMembersOf"],[1,true,false,[30,0,["allowedGroups"]]]]]]],null],[1,"\\n"],[13]],[],false,["div","label","i18n","email-group-user-chooser","hash"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/above-review-filters/assigned-to-filter.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/advanced-search-options-below/assigned-advanced-search",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"8YNSwEeC",block:'[[[10,0],[14,0,"control-group"],[12],[1,"\\n  "],[10,"label"],[14,0,"control-label"],[14,"for","search-assigned-to"],[12],[1,"\\n    "],[1,[28,[35,2],["search.advanced.assigned.label"],null]],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"controls"],[12],[1,"\\n    "],[8,[39,3],null,[["@value","@onChange","@options"],[[30,0,["outletArgs","searchedTerms","assigned"]],[30,0,["onChangeAssigned"]],[28,[37,4],null,[["maximum","excludeCurrentUser","includeGroups","customSearchOptions"],[1,false,true,[28,[37,4],null,[["assignableGroups"],[true]]]]]]]],null],[1,"\\n  "],[13],[1,"\\n"],[13]],[],false,["div","label","i18n","email-group-user-chooser","hash"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/advanced-search-options-below/assigned-advanced-search.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/category-custom-settings/assign-settings",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"iYz71v7M",block:'[[[10,"h3"],[12],[1,[28,[35,1],["discourse_assign.assign.title"],null]],[13],[1,"\\n\\n"],[10,"section"],[14,0,"field"],[12],[1,"\\n  "],[10,0],[14,0,"enable-accepted-answer"],[12],[1,"\\n    "],[10,"label"],[14,0,"checkbox-label"],[12],[1,"\\n      "],[8,[39,5],[[4,[38,7],["change",[30,0,["onChangeSetting"]]],null]],[["@type","@checked"],["checkbox",[28,[37,6],[[30,0,["outletArgs","category","enable_unassigned_filter"]]],null]]],null],[1,"\\n      "],[1,[28,[35,1],["discourse_assign.add_unassigned_filter"],null]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],[],false,["h3","i18n","section","div","label","input","readonly","on"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/category-custom-settings/assign-settings.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/group-reports-nav-item/assigned-topic-list",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"K6gPJHoW",block:'[[[8,[39,0],null,[["@group"],[[30,0,["group"]]]],null]],[],false,["group-assigned-menu-item"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/group-reports-nav-item/assigned-topic-list.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/groups-interaction-custom-options/assignable-interaction-fields",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"DPHZaFIH",block:'[[[10,0],[14,0,"control-group"],[12],[1,"\\n  "],[10,"label"],[14,0,"control-label"],[12],[1,"\\n    "],[1,[28,[35,2],["discourse_assign.admin.groups.manage.interaction.assign"],null]],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,"label"],[14,"for","visibility"],[12],[1,"\\n    "],[1,[28,[35,2],["discourse_assign.admin.groups.manage.interaction.assignable_levels.title"],null]],[1,"\\n  "],[13],[1,"\\n\\n  "],[8,[39,3],[[24,0,"groups-form-assignable-level"]],[["@name","@valueProperty","@value","@content","@onChange"],["alias","value",[30,0,["assignableLevel"]],[30,0,["assignableLevelOptions"]],[30,0,["onChangeAssignableLevel"]]]],null],[1,"\\n"],[13]],[],false,["div","label","i18n","combo-box"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/groups-interaction-custom-options/assignable-interaction-fields.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/user-activity-bottom/assigned-list",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"At//uoF1",block:'[[[41,[30,0,["currentUser","can_assign"]],[[[1,"  "],[8,[39,1],null,[["@route"],["userActivity.assigned"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,2],["user-plus"],null]],[1,"\\n    "],[1,[28,[35,3],["discourse_assign.assigned"],null]],[1,"\\n  "]],[]]]]],[1,"\\n"]],[]],null]],[],false,["if","link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/user-activity-bottom/assigned-list.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/user-messages-nav/assigned-messages",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"bZDswpMC",block:'[[[8,[39,0],null,[["@route","@model"],["userPrivateMessages.assigned",[30,0,["model"]]]],[["default"],[[[[1,"\\n  "],[1,[28,[35,1],["user-plus"],[["class"],["glyph"]]]],[1,"\\n  "],[1,[28,[35,2],["discourse_assign.assigned"],null]],[1,"\\n"]],[]]]]]],[],false,["link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/user-messages-nav/assigned-messages.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/connectors/user-preferences-notifications/remind-assigns-frequency",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"15tbayEQ",block:'[[[8,[39,0],null,[["@user"],[[30,0,["model"]]]],null]],[],false,["remind-assigns-frequency"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/connectors/user-preferences-notifications/remind-assigns-frequency.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/group-assigned-show",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"5N40nQLH",block:'[[[10,0],[14,0,"topic-search-div"],[12],[1,"\\n  "],[10,0],[14,0,"inline-form full-width"],[12],[1,"\\n    "],[8,[39,1],[[16,"placeholder",[28,[37,2],["discourse_assign.topic_search_placeholder"],null]],[24,"autocomplete","off"],[24,0,"no-blur"],[4,[38,4],["input",[28,[37,5],[[30,0],"onChangeFilter"],[["value"],["target.value"]]]],null]],[["@value","@type"],[[28,[37,3],[[30,0,["search"]]],null],"search"]],null],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n\\n"],[8,[39,6],[[24,0,"paginated-topics-list"]],[["@selector","@action"],[".paginated-topics-list .topic-list tr",[28,[37,5],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"\\n  "],[8,[39,7],null,[["@topicList","@hideCategory","@showPosters","@bulkSelectEnabled","@canBulkSelect","@selected","@hasIncoming","@incomingCount","@showInserted","@tagsForUser","@changeSort","@toggleBulkSelect","@bulkSelectAction","@bulkSelectHelper","@unassign","@reassign","@onScroll","@scrollOnLoad"],[[30,0,["model"]],[30,0,["hideCategory"]],[30,0,["showPosters"]],[30,0,["bulkSelectEnabled"]],[30,0,["canBulkSelect"]],[30,0,["selected"]],[30,0,["hasIncoming"]],[30,0,["incomingCount"]],[28,[37,5],[[30,0],"showInserted"],null],[30,0,["tagsForUser"]],[28,[37,5],[[30,0],"changeSort"],null],[28,[37,5],[[30,0],"toggleBulkSelect"],null],[28,[37,5],[[30,0],"refresh"],null],[30,0,["bulkSelectHelper"]],[28,[37,5],[[30,0],"unassign"],null],[28,[37,5],[[30,0],"reassign"],null],[30,0,["saveScrollPosition"]],true]],null],[1,"\\n\\n  "],[8,[39,8],null,[["@condition"],[[30,0,["model","loadingMore"]]]],null],[1,"\\n"]],[]]]]]],[],false,["div","input","i18n","readonly","on","action","load-more","basic-topic-list","conditional-loading-spinner"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/group-assigned-show.hbs",isStrictMode:!1})}))
define("discourse/plugins/discourse-assign/discourse/templates/group/assigned",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"yrmQa7fX",block:'[[[10,"section"],[14,0,"user-secondary-navigation group-assignments"],[12],[1,"\\n  "],[1,[28,[35,1],["group-assign"],null]],[1,"\\n  "],[8,[39,2],[[24,0,"activity-nav"]],[["@desktopClass"],["action-list activity-list nav-stacked"]],[["default"],[[[[1,"\\n"],[41,[30,0,["isDesktop"]],[[[1,"      "],[10,0],[14,0,"search-div"],[12],[1,"\\n        "],[8,[39,5],[[16,"placeholder",[28,[37,6],["discourse_assign.sidebar_name_filter_placeholder"],null]],[24,0,"search"],[4,[38,8],["input",[28,[37,9],[[30,0],[30,0,["onChangeFilterName"]]],[["value"],["target.value"]]]],null]],[["@type","@value"],["text",[28,[37,7],[[30,0,["filterName"]]],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[8,[39,10],null,[["@selector","@action"],[".activity-nav li",[28,[37,9],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"\\n      "],[8,[39,11],null,[["@showAvatar","@filter","@routeType","@assignmentCount","@search","@ascending","@order"],[false,"everyone",[30,0,["route_type"]],[30,0,["group","assignment_count"]],[30,0,["search"]],[30,0,["ascending"]],[30,0,["order"]]]],null],[1,"\\n\\n      "],[8,[39,11],null,[["@showAvatar","@groupName","@filter","@routeType","@assignmentCount","@search","@ascending","@order"],[false,[30,0,["group","name"]],[30,0,["group","name"]],[30,0,["route_type"]],[30,0,["group","group_assignment_count"]],[30,0,["search"]],[30,0,["ascending"]],[30,0,["order"]]]],null],[1,"\\n\\n"],[42,[28,[37,13],[[28,[37,13],[[30,0,["members"]]],null]],null],null,[[[1,"        "],[8,[39,11],null,[["@showAvatar","@filter","@routeType","@search","@ascending","@order"],[true,[30,1],[30,0,["route_type"]],[30,0,["search"]],[30,0,["ascending"]],[30,0,["order"]]]],null],[1,"\\n"]],[1]],null],[1,"\\n      "],[8,[39,14],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n    "]],[]]]]],[1,"\\n  "]],[]]]]],[1,"\\n"],[13],[1,"\\n\\n"],[10,"section"],[14,0,"user-content"],[12],[1,"\\n  "],[46,[28,[37,16],null,null],null,null,null],[1,"\\n"],[13]],["member"],false,["section","body-class","mobile-nav","if","div","input","i18n","readonly","on","action","load-more","group-assigned-filter","each","-track-array","conditional-loading-spinner","component","-outlet"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/group/assigned.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/modal/bulk-assign",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"4O4a291U",block:'[[[10,0],[12],[1,"\\n  "],[8,[39,1],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["assign"]],[30,0,["formApi"]]]],null],[1,"\\n"],[13],[1,"\\n\\n"],[10,0],[12],[1,"\\n  "],[8,[39,2],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["formApi","submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n"],[13]],[],false,["div","assign-user-form","d-button","if"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/modal/bulk-assign.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/user-activity-assigned",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"bBgeOIqa",block:'[[[41,[30,0,["doesntHaveAssignments"]],[[[1,"  "],[8,[39,1],null,[["@title","@body"],[[28,[37,2],["user.no_assignments_title"],null],[30,0,["emptyStateBody"]]]],null],[1,"\\n"]],[]],[[[1,"  "],[10,0],[14,0,"topic-search-div"],[12],[1,"\\n    "],[10,0],[14,0,"inline-form full-width"],[12],[1,"\\n      "],[8,[39,4],[[16,"placeholder",[28,[37,2],["discourse_assign.topic_search_placeholder"],null]],[24,"autocomplete","off"],[24,0,"no-blur"],[4,[38,6],["input",[28,[37,7],[[30,0],"onChangeFilter"],[["value"],["target.value"]]]],null]],[["@value","@type"],[[28,[37,5],[[30,0,["search"]]],null],"search"]],null],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[8,[39,8],[[24,0,"paginated-topics-list"]],[["@selector","@action"],[".paginated-topics-list .topic-list tr",[28,[37,7],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"\\n    "],[8,[39,9],null,[["@topicList","@hideCategory","@showPosters","@bulkSelectEnabled","@selected","@hasIncoming","@incomingCount","@showInserted","@tagsForUser","@changeSort","@unassign","@reassign","@onScroll","@scrollOnLoad"],[[30,0,["model"]],[30,0,["hideCategory"]],true,[30,0,["bulkSelectEnabled"]],[30,0,["selected"]],[30,0,["hasIncoming"]],[30,0,["incomingCount"]],[30,0,["showInserted"]],[30,0,["tagsForUser"]],[30,0,["changeSort"]],[30,0,["unassign"]],[30,0,["reassign"]],[30,0,["saveScrollPosition"]],true]],null],[1,"\\n\\n    "],[8,[39,10],null,[["@condition"],[[30,0,["model","loadingMore"]]]],null],[1,"\\n  "]],[]]]]],[1,"\\n"]],[]]]],[],false,["if","empty-state","i18n","div","input","readonly","on","action","load-more","basic-topic-list","conditional-loading-spinner"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/user-activity-assigned.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-assign/discourse/templates/user-private-messages-assigned",["exports","@ember/template-factory"],(function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.createTemplateFactory)({id:"py79qOyZ",block:'[[[8,[39,0],null,null,[["default"],[[[[1,"\\n  "],[10,"li"],[14,0,"messages-assigned-latest"],[12],[1,"\\n    "],[8,[39,2],null,[["@route"],["userPrivateMessages.assigned.index"]],[["default"],[[[[1,"\\n      "],[1,[28,[35,3],["envelope"],null]],[1,"\\n      "],[10,1],[12],[1,[28,[35,5],["categories.latest"],null]],[13],[1,"\\n    "]],[]]]]],[1,"\\n  "],[13],[1,"\\n"]],[]]]]],[1,"\\n\\n"],[46,[28,[37,7],null,null],null,null,null]],[],false,["user-nav/messages-secondary-nav","li","link-to","d-icon","span","i18n","component","-outlet"]]',moduleName:"discourse/plugins/discourse-assign/discourse/templates/user-private-messages-assigned.hbs",isStrictMode:!1})}))

//# sourceMappingURL=discourse-assign-1df55ac5.map